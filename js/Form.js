onepica.Form=new Class.create(VarienForm,{initialize:function($super,formId,firstFieldFocus){$super(formId,firstFieldFocus);this.initDefaults();},initDefaults:function(){this.form.getInputs("text").each(function(el){if(el.hasClassName("input-text")){if(el.value==""){el.value=el.title;}el.observe("blur",this.setInputDefault.bindAsEventListener(this));el.observe("focus",this.clearInput.bindAsEventListener(this));}}.bind(this));this.form.getInputs("password").each(function(el){if(this._getPasswordShade(el)){el.observe("blur",this.showPasswordShade.bindAsEventListener(this));el.observe("focus",this.hidePasswordShade.bindAsEventListener(this));}}.bind(this));},setInputDefault:function(evt){var input=evt.element();if(input.value==""){input.value=input.title;}this.showPasswords();},clearInput:function(evt){var input=evt.element();if(input.value==input.title){input.value="";}this.hidePasswords();},showPasswords:function(show){this.form.getInputs("password").each(function(el){if(this._getPasswordShade(el)){this.showPasswordShade(el);}}.bind(this));},hidePasswords:function(show){this.form.getInputs("password").each(function(el){if(this._getPasswordShade(el)){this.hidePasswordShade(el);}}.bind(this));},showPasswordShade:function(evt){var input=Object.isElement(evt)?evt:evt.element();if(input.value==""){this._getPasswordShade(input).show();}},hidePasswordShade:function(evt){var input=Object.isElement(evt)?evt:evt.element();this._getPasswordShade(input).hide();},_getPasswordShade:function(input){var siblings=input.adjacent(".pw-shade");if(siblings.length){return siblings.pop();}return false;},validate:function(){var result=true;result&=this.form.getInputs().each(function(el){if(el.hasClassName("input-text")&&el.hasClassName("required-entry")&&el.value==el.title){el.addClassName("validation-failed");return false;}return true;});if(!result){return false;}else{return this.validator.validate();}}});